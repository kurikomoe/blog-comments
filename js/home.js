(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{130:function(t,e,a){"use strict";var s=a(72);a.n(s).a},155:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-width full-height"},[a("loading",{attrs:{active:t.isNotDone,"can-cancel":!1,"is-full-page":!0}}),a("div",{staticClass:"full-width full-height"},[a("div",{staticClass:"main-container"},[a("div",{staticClass:"content"},[a("div",{staticClass:"top-bar full-width"}),a("div",{staticClass:"header full-width"},[a("el-row",{staticClass:"logo full-width",attrs:{type:"flex",justify:"center"}},[a("div",{staticClass:"avatar-img-container"},[a("img",{staticClass:"avatar-img",attrs:{src:t.avatarUrl}})])]),a("el-row",{staticClass:"full-width",attrs:{id:"index-title",type:"flex",justify:"center"}},[a("router-link",{staticClass:"title",attrs:{to:"/"},domProps:{innerHTML:t._s("< "+t.$t("main_page.header.kuriko_no_daily")+" >")}})],1),a("el-row",{staticClass:"full-width",attrs:{type:"flex",justify:"center"}},[a("el-menu",{ref:"navmenu",staticClass:"nav",attrs:{mode:"horizontal","default-active":"/"}},[a("el-menu-item",{staticClass:"nav-item",attrs:{router:!0,index:"/"}},[t._v(t._s(t.$t("nav.main_page")))]),a("el-menu-item",{staticClass:"nav-item",attrs:{index:"2"},on:{click:function(e){t.isEditTags=!0}}},[t._v(t._s(t.$t("nav.tags")))]),a("el-menu-item",{staticClass:"nav-item",attrs:{index:"3",disabled:""}},[t._v(t._s(t.$t("nav.link")))]),a("el-menu-item",{staticClass:"nav-item",attrs:{index:"4",disabled:""}},[t._v(t._s(t.$t("nav.about")))])],1)],1),a("el-divider",{staticClass:"header-content-divider"}),a("el-row",{staticClass:"post-topbar",attrs:{type:"flex",align:"middle",justify:"space-between"}},[0===t.tag_filter.length?a("span",{staticClass:"tag-viewer"},[a("el-button",{staticClass:"el-icon-set-up",staticStyle:{"margin-right":"0.8em"},attrs:{size:"medium",disabled:"",type:"text"}},[t._v(t._s(t.$t("filter.empty")))])],1):a("span",{staticClass:"tag-viewer"},[a("el-button",{staticClass:"el-icon-set-up",staticStyle:{"margin-right":"0.8em"},attrs:{size:"medium",type:"text"},on:{click:function(e){t.isEditTags=!0}}},[t._v(t._s(t.$t("filter.name"))+":")]),t._l(t.tag_filter,(function(e){return a("el-tag",{key:e.name,staticClass:"tag-item",attrs:{"disable-transitions":!1}},[t._v(" "+t._s(e.name))])}))],2),a("el-pagination",{staticClass:"pagination",staticStyle:{display:"inline-block"},attrs:{id:"pagination1",small:"",layout:"prev, pager, next",total:this.posts_info.total,"page-size":this.posts_info.pageSize,"current-page":t.current_page},on:{"update:currentPage":function(e){t.current_page=e},"update:current-page":function(e){t.current_page=e},"current-change":t.change_page}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPostsGot,expression:"!isPostsGot"}],staticClass:"brief-posts-loading full-width full-height"},[a("el-row",{staticClass:"full-width",attrs:{type:"flex",justify:"center"}},[a("p",[t._v("Loading")])])],1),t._l(t.posts,(function(e){return a("div",{key:e.slug},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("post-brief",{attrs:{raw_post:e},on:{finished:t.post_finish_render}})],1)],1)})),a("el-pagination",{staticClass:"pagination",attrs:{id:"pagination2",layout:"prev, pager, next",total:this.posts_info.total,"page-size":this.posts_info.pageSize,"current-page":t.current_page,background:""},on:{"update:currentPage":function(e){t.current_page=e},"update:current-page":function(e){t.current_page=e},"current-change":t.change_page}})],2)]),a("el-dialog",{attrs:{visible:t.isEditTags,"custom-class":"dialog-tags","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,fullscreen:!1},on:{"update:visible":function(e){t.isEditTags=e}}},[a("template",{slot:"title"},[a("p",[t._v(t._s(t.$t("title.filter_tags")))]),a("el-divider",{staticStyle:{"margin-bottom":"0"}})],1),t._l(t.tag_filter,(function(e){return a("el-tag",{key:e.name,staticClass:"tag-item",attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.remove_tag_filter_item(e)}}},[t._v(" "+t._s(e.name))])})),t.isSelectTag?a("el-autocomplete",{ref:"tag_selector",staticClass:"tag-item tag-selector inline-input",attrs:{autofocus:!0,autocomplete:"on",autosize:{maxRows:1},size:"small","prefix-icon":"el-icon-plus","fetch-suggestions":t.get_tags_suggestion,placeholder:t.$t("other.plz_select")},on:{select:t.insert_new_tag_filter_item},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item;return[a("span",{staticStyle:{margin:"0","text-align":"left"}},[t._v(t._s(s.name))]),a("span",{staticStyle:{margin:"0","text-align":"right"}},[t._v("("+t._s(s.count)+")")])]}}],null,!1,4208373683)}):a("el-button",{staticClass:"tag-item tag-selector button-new-tag",attrs:{size:"small"},on:{click:t.add_new_tag_filter}},[t._v("+ Tag")]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"dialog-btn",on:{click:t.reset_tag_filter}},[t._v(t._s(t.$t("other.reset")))]),a("el-button",{staticClass:"dialog-btn",attrs:{type:"primary"},on:{click:t.perform_tag_filter}},[t._v(t._s(t.$t("other.ok")))])],1)],2),a("div",{staticClass:"footer full-width"},[a("el-divider"),a("div",{staticClass:"footer-wrapper"},[a("my-footer",{staticClass:"full-width"})],1)],1)],1)])],1)};s._withStripped=!0;a(67),a(99),a(25);var i=a(100),n=a.n(i),o=a(0);o.default.component(n.a.name,n.a);a(101);var r=a(102),l=a.n(r);o.default.component(l.a.name,l.a);a(105);var c=a(106),u=a.n(c);o.default.component(u.a.name,u.a);a(69),a(108);var g=a(109),p=a.n(g);o.default.component(p.a.name,p.a);a(110);var d=a(111),m=a.n(d);o.default.component(m.a.name,m.a);a(119);var f=a(120),_=a.n(f);o.default.component(_.a.name,_.a);a(121);var h=a(122),v=a.n(h);o.default.component(v.a.name,v.a);a(64),a(123);var w=a(89),y=a.n(w);o.default.component(y.a.name,y.a);a(124);var C=a(125),b=a.n(C);o.default.component(b.a.name,b.a);a(126);var k=a(127),x=a.n(k);o.default.component(x.a.name,x.a);a(92),a(61);var $=a(66),S=a(95),A=a.n(S);a(96),a(65);const L="https://kurikomoe-1300672427.cos.ap-beijing.myqcloud.com/img/avatar.jpg";var T={name:"index",components:{"post-brief":()=>Promise.all([a.e(0),a.e(7)]).then(a.bind(null,157)),"my-footer":()=>Promise.all([a.e(0),a.e(2)]).then(a.bind(null,158)),Loading:A.a},data:()=>({avatarUrl:L,posts_info:{total:1,pageSize:1,pageCount:1},posts_orig:[],posts:[],tags:[],isSelectTag:!1,isEditTags:!1,to_select_tags:null,tag_filter:[],current_page:1,isLoading:!0,finished_post_cnt:0,isFinished:!1}),computed:{isPostsGot:function(){return 0!==this.posts.length},isNotDone:function(){return!(this.isFinished&&!this.isLoading)}},methods:{post_finish_render:function(){this.finished_post_cnt+=1,this.finished_post_cnt===this.posts.length&&(this.isFinished=!0)},get_all_posts:async function(){this.posts_info=await $.a.getAllPosts(),this.posts_orig=this.posts=this.posts_info.data,this.isLoading=!1},get_posts:async function(){this.posts_info=await $.a.getPostsInfo(1),this.posts_orig=this.posts=this.posts_info.data,this.isLoading=!1},get_tags:async function(){this.tags=await $.a.getTagsInfo()},get_tags_suggestion(t,e){null===this.to_select_tags&&(this.to_select_tags=this.tags.sort((t,e)=>e.count-t.count)),e(this.to_select_tags)},add_new_tag_filter(){this.isSelectTag=!0,this.$nextTick(()=>{this.$refs.tag_selector.focus()})},insert_new_tag_filter_item(t){this.tag_filter.push(t),this.to_select_tags=this.to_select_tags.filter(e=>e.name!==t.name)},remove_tag_filter_item(t){this.to_select_tags.push(t),this.tag_filter=this.tag_filter.filter(e=>e.name!==t.name)},reset_tag_filter(){this.to_select_tags=null,this.tag_filter=[]},check_tag_filter(t){for(let e=0;e<this.tag_filter.length;e+=1){const a=this.tag_filter[e];let s=!1;for(let e=0;e<t.length;e+=1){const i=t[e];if(a.name===i.name){s=!0;break}}if(!s)return!1}return!0},async perform_tag_filter(){if(0!==this.tag_filter.length){await this.get_all_posts();let t=this.posts.filter(t=>this.check_tag_filter(t.tags));t.length>0?this.posts=t:(this.$notify.error({title:this.$t("filter.name"),message:this.$t("filter.error")}),this.reset_tag_filter(),await this.get_posts())}else await this.get_posts();this.isEditTags=!1,this.$refs.navmenu["default-active"]="/"},change_page:async function(t){let e=$.a.getPostsInfo(t);this.isFinished=!1,this.isLoading=!0,this.finished_post_cnt=0;let a=setTimeout(()=>{this.isLoading=!1,this.isFinished=!0},1500),s=async()=>{this.posts_info=await e,this.posts_orig=this.posts=this.posts_info.data,clearTimeout(a),this.isLoading=!1},i=document.getElementById("app");const n=new IntersectionObserver(t=>{let[e]=t;e.isIntersecting&&(n.disconnect(),s())});n.observe(i),i.scrollIntoView()}},async mounted(){await $.a.getAllPosts()},created(){this.get_posts(),this.get_tags()}},j=(a(130),a(6)),I=Object(j.a)(T,s,[],!1,null,"47323bf2",null);I.options.__file="src/components/index.vue";e.default=I.exports},60:function(t,e,a){"use strict";var s=a(65);const i="https://avoscloud.com/1.1/classes",n="OeEtcHlTwNanGrrmpR3YA6Aa-gzGzoHsz",o="CuRwM3LRXOFfCT9iH1yUpV8h",r="LeanCloud-JS-SDK/3.15.0 (Browser)",l="!watermark_orig",c="!watermark_orig",u="/",g="https://kurikomoe-1300672427.image.myqcloud.com",p=u;e.a={other:{isDebug:!1,max_retry_times:3,retry_interval:500,timeout:1500,img_height_width_ratio:2},api:{site:s.a.urljoin(p,"api/site.json"),posts:s.a.urljoin(p,"api/posts.json"),posts_index:t=>s.a.urljoin(p,"api/posts/",`${t}.json`),post:(t,e)=>s.a.urljoin(p,"api/articles",e.join("/"),`${t}.json`),tags:s.a.urljoin(p,"api/tags.json")},post:{max_heading_length:32,omit_indicator:"...",aside_deepest_heading_level:3},gitalk:{clientID:"4c7a5aea202233a50462",clientSecret:"2a4cf51e76cca79a256f5746dcf81a49e802439b",repo:"fuwafuwa-blog",owner:"kurikomoe",admin:["kurikomoe"]},disqus:{shortname:"kurikomoe",public_key:"MnMSTZVAi6lGgbxnhC7pvRn9izcGJpQrKCHTtkxYIoyr3Uo9NU9DDxvcLSKhNl8c"},valine:{ApiHost:i,AppID:n,AppKey:o,UA:r},cos:{fileURL:u,imageURL:g,imageStyleSmall:l,imageStyleLarge:c,image_process:{webp_cmd:t=>`${t}?imageView2/format/webp`,png_cmd:t=>`${t}?imageView2/format/png`}}}},61:function(t,e,a){"use strict";var s=a(10),i=a(60);e.a={imgProcess:function(t,e=!1,a=!1){t.querySelectorAll("img").forEach(t=>{let e,n,o=t.src;o.includes("?none")?(o=t.src.replace("?none",""),e=o,n=o):a||"/"===i.a.cos.imageURL||!o.includes(i.a.cos.imageURL)?(e=o,n=o):(e=o+i.a.cos.imageStyleSmall,n=o+i.a.cos.imageStyleLarge),t.setAttribute("src",e);const r=document.createElement("picture");t.addEventListener("load",()=>{t.clientHeight>t.clientWidth*i.a.other.img_height_width_ratio&&(r.setAttribute("data-expand",s.a.t("other.img_load_more")),r.style["max-height"]=`${.618*t.clientWidth}px`,r.classList.add("limit-img-height"))},!0);const l=document.createElement("source");l.setAttribute("srcset",i.a.cos.image_process.webp_cmd(e)),l.setAttribute("type","image/webp");const c=document.createElement("source");c.setAttribute("srcset",i.a.cos.image_process.png_cmd(e)),c.setAttribute("type","image/png");const u=document.createElement("a");u.setAttribute("data-fancybox","gallery"),u.setAttribute("href",n),t.parentElement.insertBefore(u,t),u.appendChild(r),r.appendChild(l),r.appendChild(c),r.appendChild(t)})},doCheck:function(t,e,a,s=5,i=500,n=!1){let o=0;const r=setInterval(()=>{if(o+=1,o>=s);else{if(!e())return;a()}clearInterval(r)},i);return r}}},64:function(t,e,a){"use strict";a(90),a(25);var s=a(91),i=a.n(s);a(0).default.component(i.a.name,i.a)},65:function(t,e,a){"use strict";const s=a(93);e.a={urljoin:function(...t){const e=t.map(t=>encodeURI(t));return s(e)}}},66:function(t,e,a){"use strict";var s=a(7),i=a.n(s),n=a(60);const o=a(94),r=i.a.create({headers:{get:{"Cache-Control":"no-cache"}}});function l(t){return r.get(n.a.api.posts_index(t)).then(t=>t.data)}function c(t){return new Promise(e=>setTimeout(e,t))}async function u(t,e=(t=>-1!==t),a=-1,s=n.a.other.max_retry_times,i=n.a.other.retry_interval){for(let a=0;a<s;a+=1){const a=await t();if(e(a))return a;await c(i)}return a}function g(t,e){const a=`${n.a.valine.ApiHost}/Comment`;let s=`?where={"$or":[{"rid":{"$exists":false}},{"rid":""}],"url":"${t}"}&order=-createdAt,-insertedAt&limit=0&count=1`;s=`${a}${encodeURI(s)}`;const r=function(t){const e=(new Date).getTime();return{sign:o(e+t),timestamp:e}}(n.a.valine.AppKey),l={"X-LC-Id":n.a.valine.AppID,"X-LC-Sign":`${r.sign},${r.timestamp}`,"X-LC-UA":n.a.valine.UA};return u(()=>i.a.get(s,{timeout:n.a.other.timeout,headers:l,cancelToken:e.token}).then(t=>t.data.count).catch(t=>-1),t=>-1!==t,-1,1)}e.a={getPostDetails:function(t,e,a){return r.get(function(t,e){return n.a.api.post(t,e)}(t,e)).then(a).catch(console.error)},getPostsInfo:l,getAllPosts:async function(){const t=await l(1),e=t.pageCount,a=[];let s=[t];for(let t=2;t<=e;t+=1)s.push(l(t));s=await Promise.all(s);for(let t=0;t<s.length;t+=1)for(let e=0;e<s[t].data.length;e+=1)a.push(s[t].data[e]);return{total:a.length,pageSize:a.length,pageCount:1,data:a}},getTagsInfo:function(){return r.get(n.a.api.tags).then(t=>t.data)},getCommentCount:async function(t,e){return g(t,e)},checkDisqusAccess:async function(){for(let t=0;t<1;t+=1){if(await i.a.head("https://disqus.com/next/config.json",{timeout:n.a.other.timeout}).then(()=>!0).catch(t=>!1))return!0;await c(n.a.other.retry_interval)}return!1},sleep:c}},67:function(t,e,a){"use strict";a(78),a(25);var s=a(79),i=a.n(s);a(0).default.component(i.a.name,i.a)},69:function(t,e,a){"use strict";a(81),a(25);var s=a(82),i=a.n(s);a(0).default.component(i.a.name,i.a)},72:function(t,e,a){},92:function(t,e,a){"use strict";a(128),a(25);var s=a(129),i=a.n(s);a(0).default.component(i.a.name,i.a)}}]);